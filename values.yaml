appName: "Nutrient-Workflow"
host:
  name: test.your_domain.com

globalEnv:
  - name: PORTAL_URL
    value: "https://test.your_domain.com"
  - name: CONSOLE_LOG_FORMAT
    value: text
  - name:  ENV_PLATFORM
    value: kubernetes
  - name: PORT
    value: "3555"
  - name:  CENTRAL_ROOT
    value: https://central.integrify.com

secrets:
  awsCreds: {"accessKeyId": "YOUR_ACCESS_KEY_ID", "secretAccessKey": "YOUR_SECRET_ACCESS_KEY", "region": "us-east-1"} # Example key. You should replace with your own AWS creds.
  integrifyEnvToken: 12345678-1234-1234-1234-123456789ABC # Example key. You should replace with your own ENV key.
  redisConn: {"host":"redishost.your_domain.com", "port": 6379, "db": 0} # Change host to your Redis server
  recapthchaSecurityKey: 12345678-1234-1234-1234-123456789ABC # Example key. You should replace with your own recaptcha key.
  credentialsSecret: 12345678-1234-1234-1234-123456789ABC # Example key. You should replace with your own secret.
  docAuthLicense: '[{ "domain": "test.your_domain.com", "key": "YOUR_DOCUMENT_AUTHORING_KEY"}]'

config:
  portalUrl: "https://test.your_domain.com"
  featureFlags:
    - id: example-for-tests
      active: true
      description: > 
            used in integration test - do not remove!
  consumersConn: data source=sqlhost.your_domain.com;database=CONSUMERS_DATABASE_NAME;user id=DATABASE_USER;password=DATABASE_PASSWORD;
  mongo:
    connectionString: "mongodb://mongohost.your_domain.com:27017" # Change host to your mongo server
    options:
      useUnifiedTopology: true
      useNewUrlParser: true
      keepAlive: true
      maxPoolSize: 100
  client:
    endpointSecurityChecks: true
    max_sockets: 5000
    requestDetailCacheMinutes: 30
  service:
    task_processor_interval: 1
    querygen_trace: "false"
    debug_logs: "off"
    TimeZoneIndex: "20"
  jwtSecret: "12345678-1234-1234-1234-123456789ABC" # Example key. You should update with your own secret
  expiresInUnit: days
  expiresInAmount: 5
  documentEngine:
    containerUrl: "http://test-document-engine:5000"
    viewerUrl: "https://test-de.your_domain.com"
    apiToken: "12345678-1234-1234-1234-123456789ABC" # Replace with your own document-engine API token. This token should also be added in the document-engine.apiAuth.apiToken section below
    privateKey: |-
            -----BEGIN RSA PRIVATE KEY-----
            YOUR JWT PRIVATE KEY
            -----END RSA PRIVATE KEY-----
    # Steps to generate public and private key can be found here - https://pspdfkit.com/guides/document-engine/viewer/client-authentication/generate-a-jwt/

# Image Parameters
image:
  repo: 940767003169.dkr.ecr.us-east-1.amazonaws.com
  pullPolicy: Always
  # Pull policy options are IfNotPresent, Always, Never. 
  # Image pull information can be found here - https://kubernetes.io/docs/concepts/containers/images/

# Ingress Parameters
ingress:
  annotations:
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "25m"

# Services information
auth:
  repoName: api-auth
  name: auth
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/auth/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

browseHouse:
  repoName: browse-house
  name: browse-house
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 80
  port: 3555
  restart: Always
  healthcheck: /api/instance/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

client:
  repoName: client
  name: workflow
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

configProcessor:
  repoName: config-processor
  name: config-processor
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  restart: Always
  resources:
    requests:
      cpu: ".5"
      memory: "1Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

coreService:
  repoName: core-service
  name: core-service
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /healthcheck
  env:
  - name: MIN_THREADS
    value: "150"
  - name: REQUEST_LOGGING
    value: "off"
  - name: ASPNETCORE_URLS
    value: "http://*:3555"
  resources:
    requests:
      cpu: "2"
      memory: "4Gi"
    limits:
      cpu: "2"
      memory: "4Gi"

dashboards:
  repoName: api-dashboards
  name: dashboards
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/dashboards/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

files:
  repoName: api-files
  name: files
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  ## use an existing Persistent Volume Claim if not using an S3 bucket
  existingClaim: files-pv-claim 
  restart: Always
  healthcheck: /api/files/healthcheck
  env:
  - name: FILE_STORE
    value: "/integrify/files"
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

forms:
  repoName: api-forms
  name: forms
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/forms/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

instance:
  repoName: api-instance
  name: instance
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/instance/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

integrations:
  repoName: api-integrations
  name: integrations
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/integrations/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

processes:
  repoName: api-processes
  name: processes
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/processes/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

reports:
  repoName: api-reports
  name: reports
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/reports/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

scheduler:
  repoName: scheduler
  name: scheduler
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/scheduler/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

sessionProcessor:
  repoName: session-processor
  name: session-processor
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  restart: Always
  resources:
    requests:
      cpu: ".5"
      memory: "1Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

settings:
  repoName: api-settings
  name: settings
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/settings/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

ssp:
  repoName: single-spa-portal
  name: portal
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3000
  restart: Always
  healthcheck: /
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

taskDispatcher:
  repoName: api-task-dispatcher
  name: task-dispatcher
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/task-dispatcher/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

taskProcessor:
  repoName: core-service-tp
  name: task-processor
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  restart: Always
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

tenant:
  repoName: api-tenant
  name: tenant
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50
  port: 3555
  restart: Always
  healthcheck: /api/tenant/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "1Gi"

user:
  repoName: api-user
  name: user
  minReplicas: 1
  maxReplicas: 3
  avgMemUtilization: 50  
  port: 3555
  restart: Always
  healthcheck: /api/user/healthcheck
  resources:
    requests:
      cpu: ".25"
      memory: "0.5Gi"
    limits:
      cpu: ".5"
      memory: "0.5Gi"
      
documentEngine:
  pspdfkit:
    name: test-document-engine
    port: 5000

document-engine:
  enabled: true
  documentEngineLicense:
    externalSecret: 
      name: document-engine-license
      key: DOCUMENT_ENGINE_ACTIVATION_KEY
  apiAuth:
    apiToken: "12345678-1234-1234-1234-123456789ABC"
    # Should be the same as the document-engine API token in the config section above
    jwt:
      enabled: true
      algorithm: RS256
      createSecret: true
      publicKey: |
        -----BEGIN PUBLIC KEY-----
        YOUR JWT PUBLIC KEY
        -----END PUBLIC KEY-----
  dashboard:
    enabled: true
    auth:
      username: admin
      password: admin
  database:
    enabled: true
    postgres:
      host: "{{ .Release.Name }}-document-engine-postgres-rw"
      database: document-engine
      username: postgres
      password: nutrientDocumentEngine
      adminUsername: postgres
      adminPassword: nutrientDocumentEngine
  cloudNativePG:
    enabled: true
    clusterName: "{{ .Release.Name }}-document-engine-postgres"
    operatorNamespace: cnpg-system
    operatorReleaseName: cloudnative-pg
    clusterSpec:
      instances: 1
      storage:
        size: 512Mi
        storageClass: standard
      enableSuperuserAccess: true
      bootstrap:
        initdb:
          database: nutrient
          owner: whatever
      logLevel: warning
    superuserSecret:
      create: true
      username: postgres
      password: nutrientDocumentEngine
    networkPolicy:
      enabled: true